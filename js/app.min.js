var wizardNgModule=angular.module("wizardApp",["ngCookies","ngResource"]).config(["$locationProvider","$resourceProvider",function(e,o){e.html5Mode(!0),o.defaults.stripTrailingSlashes=!0}]);wizardNgModule.controller("stepsController",["$scope","wizardSrvc","$location",function(e,o,t){e.steps=[{title:"Introduction"},{title:"Accessing the API"},{title:"Technologies"},{title:"Get access token"},{title:"Get token"},{title:"Show token"},{title:"Read record"},{title:"Update record"}],e.init=function(){var o=t.search().code;void 0===o||null===o?console.log("Nothing here"):e.wizardSrvc.current=4},e.wizardSrvc=o,e.init()}]),wizardNgModule.controller("controlsController",["$scope","wizardSrvc",function(e,o){e.wizardSrvc=o,e.next=function(){o.next()},e.finish=function(){o.finish()},e.back=function(){o.back()}}]),wizardNgModule.controller("authorizationCodeController",["$scope","$cookies","wizardSrvc",function(e,o,t){"localhost"==location.hostname&&(e.form={},e.form.client_id="APP-1X454QYQ66U6XW7X"),e.authString="http://[api_url]/oauth/authorize?client_id=[client_id]&response_type=code&redirect_uri=[redirect_uri]&scope=[scope]",e.wizardSrvc=t,e.getAuthorizationCode=function(){var t=e.authString;t=t.replace("[api_url]","sandbox.orcid.org"),t=t.replace("[client_id]",e.form.client_id),t=t.replace("[redirect_uri]","http://"+location.hostname+":8000"),t=t.replace("[scope]",e.form.scope),console.log(t),o.put("current",e.wizardSrvc.current),o.put("orcid_oauth2_client_id",e.form.client_id),o.put("orcid_oauth2_redirect_uri","http://"+location.hostname+":8000"),setTimeout(function(){window.location.href=t},125)}}]),wizardNgModule.controller("tokenController",["$scope","$location","$cookies","$http",function(e,o,t,c){e.show_access_token=!1,e.expires_in=!1,e.name=!1,e.orcid=!1,e.scope=!1,e.token_type=!1,"localhost"==location.hostname&&(e.client_secret="8fa38bea-48e2-4238-9479-e55448ffa225"),e.access_code=null,e.client_id=null,e.getCode=function(){e.access_code=o.search().code,e.client_id=t.get("orcid_oauth2_client_id"),(void 0===e.access_code||null===e.access_code)&&o.path("/")},e.exchangeCode=function(){c({url:"http://pub.sandbox.orcid.org/oauth/token",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},transformRequest:function(e){var o=[];for(var t in e)o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));var c=o.join("&");return console.log("****RETURNING "+c),c},data:{client_id:e.client_id,client_secret:e.client_secret,grant_type:"authorization_code",redirect_uri:"http://localhost:8000",code:e.access_code}}).success(function(o){e.wizardSrvc.current=5,e.token=o}).error(function(e,o,t,c){console.log("***OOPS "+o+" H: "+angular.toJson(e))})},e.show=function(o){switch(e.show_access_token=!1,e.show_expires_in=!1,e.show_name=!1,e.show_orcid=!1,e.show_scope=!1,e.show_token_type=!1,console.log(o),o){case"token":e.show_access_token=!0;break;case"expiration":e.show_expires_in=!0;break;case"name":e.show_name=!0;break;case"orcid":e.show_orcid=!0;break;case"scope":e.show_scope=!0;break;case"type":e.show_token_type=!0}},e.getCode()}]),wizardNgModule.service("wizardSrvc",["$rootScope",function(e){var o={current:0,elements:document.getElementsByClassName("step"),back:function(){o.current>0&&o.current--},next:function(){o.current==o.elements.length-1?o.current=0:o.current++},finish:function(){o.current=0}};return o}]);