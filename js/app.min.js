var wizardNgModule=angular.module("wizardApp",["ngCookies"]);wizardNgModule.controller("stepsController",["$scope","wizardSrvc",function(e,o){e.steps=[{title:"Introduction"},{title:"Description"},{title:"Technologies"},{title:"Get access token"},{title:"Get token"},{title:"Read record"},{title:"Update record"}],e.wizardSrvc=o}]),wizardNgModule.controller("controlsController",["$scope","wizardSrvc",function(e,o){e.wizardSrvc=o,e.next=function(){o.next()},e.finish=function(){o.finish()},e.back=function(){o.back()}}]),wizardNgModule.controller("authorizationCodeController",["$scope","$cookies","wizardSrvc",function(e,o,t){"localhost"==location.hostname&&(e.form={},e.form.client_id="0000-0003-3064-5929"),e.authString="http://[api_url]/oauth/authorize?client_id=[client_id]&response_type=code&redirect_uri=[redirect_uri]&scope=[scope]",e.wizardSrvc=t,e.getAuthorizationCode=function(){var t=e.authString;t=t.replace("[api_url]","qa.orcid.org"),t=t.replace("[client_id]",e.form.client_id),t=t.replace("[redirect_uri]",location.hostname),t=t.replace("[scope]",e.form.scope),console.log(t),o.put("current",e.wizardSrvc.current),o.put("orcid_oauth2_client_id",e.form.client_id),o.put("orcid_oauth2_redirect_uri",location.hostname),setTimeout(function(){window.location.href=t},125)}}]),wizardNgModule.controller("tokenController",["$scope","$location","$cookies",function(e,o,t){e.access_code=null,e.client_id=null,e.getCode=function(){e.access_code=o.search().code,e.client_id=t.get("orcid_oauth2_client_id"),console.log(e.access_code),console.log(e.client_id),(void 0===e.access_code||null===e.access_code)&&o.path("/")},e.exchangeCode=function(){$http({url:"http://pub.qa.orcid.org/oauth/token",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},transformRequest:function(e){var o=[];for(var t in e)o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));var c=o.join("&");return console.log("****RETURNING "+c),c},data:{client_id:"0000-0003-3064-5929",client_secret:"20877677-5001-4d86-820e-5f527aa9bd14",grant_type:"authorization_code",redirect_uri:"http://localhost:8080/orcid-api-walkthrough/",code:e.access_code}}).success(function(e){console.log(e)}).error(function(e,o,t,c){console.log("***OOPS "+o+" H: "+angular.toJson(e))})},e.getCode()}]),wizardNgModule.service("wizardSrvc",["$rootScope",function(e){var o={current:"localhost"==location.hostname?3:0,elements:document.getElementsByClassName("step"),back:function(){o.current>0&&o.current--},next:function(){o.current==o.elements.length-1?o.current=0:o.current++},finish:function(){o.current=0}};return o}]);